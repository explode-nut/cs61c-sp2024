<!DOCTYPE html>
<!-- saved from url=(0077)https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./Lab 2 _ CS 61C Spring 2024_files/analytics.js.下载" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app201.us.archive.org';v.server_ms=315;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="./Lab 2 _ CS 61C Spring 2024_files/bundle-playback.js.下载" charset="utf-8"></script>
<script type="text/javascript" src="./Lab 2 _ CS 61C Spring 2024_files/wombat.js.下载" charset="utf-8"></script>
<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden"};</script>
<script type="text/javascript" src="./Lab 2 _ CS 61C Spring 2024_files/ruffle.js.下载"></script>
<script type="text/javascript">
    __wm.init("https://web.archive.org/web");
  __wm.wombat("https://cs61c.org/sp24/labs/lab02/","20240301065845","https://web.archive.org/","web","https://web-static.archive.org/_static/",
	      "1709276325");
</script>
<link rel="stylesheet" type="text/css" href="./Lab 2 _ CS 61C Spring 2024_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./Lab 2 _ CS 61C Spring 2024_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->


<meta name="language" content="english">
<title>Lab 2 | CS 61C Spring 2024</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">
<link rel="shortcut icon" type="image/png" href="https://web.archive.org/web/20240301065845im_/https://cs61c.org/sp24/img/favicon.png">
<link rel="stylesheet" href="./Lab 2 _ CS 61C Spring 2024_files/bootstrap.min.css" integrity="" crossorigin="anonymous" referrerpolicy="no-referrer">
<script defer="" src="./Lab 2 _ CS 61C Spring 2024_files/bootstrap.min.js.下载" integrity="" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script defer="" src="./Lab 2 _ CS 61C Spring 2024_files/instantpage.min.js.下载" integrity="" crossorigin="anonymous"></script>
<link rel="stylesheet" href="./Lab 2 _ CS 61C Spring 2024_files/main.css">
<script defer="" type="text/javascript" src="./Lab 2 _ CS 61C Spring 2024_files/main.js.下载"></script>

<script type="text/javascript" src="./Lab 2 _ CS 61C Spring 2024_files/main-sync.js.下载"></script>
<script>initDarkToggle();</script>
<script defer="" src="./Lab 2 _ CS 61C Spring 2024_files/tocbot.min.js.下载" integrity="" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display: block; direction: ltr;"><template shadowrootmode="closed"><div id="wm-ipp" style="position:fixed;left:0;top:0;right:0;" class="">
<div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="https://archive.org/includes/donate.php?as_page=1&amp;platform=wb&amp;referer=https%3A//web.archive.org/web/20240301065845/https%3A//cs61c.org/sp24/labs/lab02/" scrolling="no" frameborder="0" style="width:100%; height:100%">
    </iframe>
  </div>
</div><div id="wm-ipp-inside">
  <div id="wm-toolbar" style="position:relative;display:flex;flex-flow:row nowrap;justify-content:space-between;">
    <div id="wm-logo" style="/*width:110px;*/padding-top:12px;">
      <a href="https://web.archive.org/web/" title="Wayback Machine home page"><img src="https://web-static.archive.org/_static/images/toolbar/wayback-toolbar-logo-200.png" srcset="https://web-static.archive.org/_static/images/toolbar/wayback-toolbar-logo-100.png, https://web-static.archive.org/_static/images/toolbar/wayback-toolbar-logo-150.png 1.5x, https://web-static.archive.org/_static/images/toolbar/wayback-toolbar-logo-200.png 2x" alt="Wayback Machine" style="width:100px" border="0"></a>
    </div>
    <div class="c" style="display:flex;flex-flow:column nowrap;justify-content:space-between;flex:1;">
      <form class="u" style="display:flex;flex-direction:row;flex-wrap:nowrap;" target="_top" method="get" action="https://web.archive.org/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="https://cs61c.org/sp24/labs/lab02/" onfocus="this.focus();this.select();" style="flex:1;" autocomplete="off"><input type="hidden" name="type" value="replay"><input type="hidden" name="date" value="20240301065845"><input type="submit" value="Go">
      </form>
      <div style="display:flex;flex-flow:row nowrap;align-items:flex-end;">
                <div class="s" id="wm-nav-captures" style="flex:1;"><a class="t" href="https://web.archive.org/web/*/https://cs61c.org/sp24/labs/lab02/" title="See a list of every capture for this URL">2 captures</a><div class="r" title="Timespan for captures of this URL">1 Mar 2024 - 1 Mar 2024</div></div>
        <div class="k">
          <a href="https://web.archive.org/web/20080501000000/https://cs61c.org/sp24/labs/lab02/" id="wm-graph-anchor">
            <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
              <canvas id="wm-sparkline-canvas" width="725" height="27" border="0"></canvas>
            <div class="yt" style="display: none; width: 25px; height: 27px; left: 300px;"></div><div class="mt" style="display: none; width: 2px; height: 27px; left: 309px;"></div></div>
          </a>
        </div>
      </div>
    </div>
    <div class="n">
      <table>
        <tbody>
          <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
          <tr class="m">
            <td class="b" nowrap="nowrap">Feb</td>
            <td class="c" id="displayMonthEl" title="You are here: 06:58:45 Mar 01, 2024">Mar</td>
            <td class="f" nowrap="nowrap">Apr</td>
          </tr>
          <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
          <tr class="d">
            <td class="b" nowrap="nowrap"><img src="https://web-static.archive.org/_static/images/toolbar/wm_tb_prv_off.png" alt="Previous capture" width="14" height="16" border="0"></td>
            <td class="c" id="displayDayEl" style="width:34px;font-size:22px;white-space:nowrap;" title="You are here: 06:58:45 Mar 01, 2024">01</td>
            <td class="f" nowrap="nowrap"><img src="https://web-static.archive.org/_static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"></td>
          </tr>
          <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
          <tr class="y">
            <td class="b" nowrap="nowrap">2023</td>
            <td class="c" id="displayYearEl" title="You are here: 06:58:45 Mar 01, 2024">2024</td>
            <td class="f" nowrap="nowrap">2025</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="r" style="display:flex;flex-flow:column nowrap;align-items:flex-end;justify-content:space-between;">
      <div id="wm-btns" style="text-align:right;height:23px;">
                <span class="xxs">
          <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a id="wm-save-snapshot-open" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#" title="Share via My Web Archive" style="display: none;">
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in" style="display: inline-block;">
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web" style="display: none;"></span>
        </span>
                <a class="xxs" href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
        <a id="wm-tb-close" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#close" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" class="xxs">
        <a href="https://web.archive.org/web/20240301065845/http://web.archive.org/screenshot/https://cs61c.org/sp24/labs/lab02/" id="wm-screenshot" title="screenshot" style="visibility: hidden;">
          <span class="wm-icon-screen-shot"></span>
        </a>
        <a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#" id="wm-video" title="video">
          <span class="iconochive-movies"></span>
        </a>
        <a id="wm-share-facebook" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#" data-url="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
        <a id="wm-share-twitter" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#" data-url="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
      <div style="padding-right:2px;text-align:right;white-space:nowrap;">
        <a id="wm-expand" class="wm-btn wm-closed" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span class="xxs" style="font-size:80%;">About this capture</span></a>
      </div>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
        <div id="wm-capinfo-notice" source="api"></div>
                <div id="wm-capinfo-collected-by">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/save-page-now-outlinks)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/save-page-now-outlinks" target="_new"><span class="wm-title">Save Page Now Outlinks</span></a></div>
	      </div>
    </div>
    </div>
    <div id="wm-capinfo-timestamps">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="https://web-static.archive.org/_static/images/loading.gif" alt="loading"></div>
    </div>
    </div>
  </div></div></div><link rel="stylesheet" type="text/css" href="./Lab 2 _ CS 61C Spring 2024_files/banner-styles.css"><link rel="stylesheet" type="text/css" href="./Lab 2 _ CS 61C Spring 2024_files/iconochive.css"><div class="wb-autocomplete-suggestions "></div></template>
</div><div id="wm-ipp-print">The Wayback Machine - https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/</div>
<script type="text/javascript">//<![CDATA[
__wm.bt(725,27,25,2,"web","https://cs61c.org/sp24/labs/lab02/","20240301065845",1996,"https://web-static.archive.org/_static/",["https://web-static.archive.org/_static/css/banner-styles.css?v=S1zqJCYt","https://web-static.archive.org/_static/css/iconochive.css?v=qtvMKcIJ"], false);
  __wm.rw(1);
//]]></script>
<!-- END WAYBACK TOOLBAR INSERT -->
 
<nav class="navbar navbar-expand-lg navbar-dark mb-4">
<div class="container">
<a class="navbar-brand" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/">
<img class="d-inline-block me-2 rounded" height="48" width="48" src="./Lab 2 _ CS 61C Spring 2024_files/icon-small.png" alt="outline of square computer chip with cs61c label">
<span class="align-middle">CS 61C Spring 2024</span>
</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle Navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarContent">
<ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
<a class="nav-link" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/calendar/">Calendar</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/exam/">Exam</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/staff/">Staff</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/policies/">Policies</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/resources/">Resources</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#" id="navbarLinksDropdownToggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">Quick Links</a>
<ul class="dropdown-menu p-0" aria-labelledby="navbarLinksDropdownToggle">
<li><a class="dropdown-item nav-link" href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/pdfs/resources/reference-card.pdf">Reference Card</a></li>
<li><a class="dropdown-item nav-link" href="https://web.archive.org/web/20240301065845/https://oh.cs61c.org/">OH Queue</a></li>
<li><a class="dropdown-item nav-link" href="https://web.archive.org/web/20240301065845/https://venus.cs61c.org/">Venus</a></li>
<li><a class="dropdown-item nav-link" href="https://web.archive.org/web/20240301065845/https://inst.eecs.berkeley.edu/~cs61c/archives.html">Past Semesters</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>
<main class="mb-4">
<section class="section">
<div class="container">
<div class="row spec">
<nav id="toc-wrapper" class="col-md-3 d-print-none sticky-md-top nav-wrapper" aria-label="table of contents"><ul class="toc-list nav flex-column"><li class="nav-item active"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#setup" class="nav-link node-name--H2  active">Setup</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#review-pointers" class="nav-link node-name--H2 ">Review: Pointers</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-1-pointers-to-stack-vs-heap" class="nav-link node-name--H2 ">Exercise 1: Pointers to Stack vs Heap</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-2-compiler-warnings-and-errors" class="nav-link node-name--H2 ">Exercise 2: Compiler Warnings and Errors</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#what-is-gdb" class="nav-link node-name--H2 ">What is GDB?</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-3-intro-to-gdb" class="nav-link node-name--H2 ">Exercise 3: Intro to GDB</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-4-more-gdb" class="nav-link node-name--H2 ">Exercise 4: More GDB</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-5-debug" class="nav-link node-name--H2 ">Exercise 5: Debug</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#valgrind" class="nav-link node-name--H2 ">Valgrind</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-6-using-valgrind-to-find-segfaults" class="nav-link node-name--H2 ">Exercise 6: Using Valgrind to find segfaults</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-7-memory-management" class="nav-link node-name--H2 ">Exercise 7: Memory Management</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-8-double-pointers" class="nav-link node-name--H2 ">Exercise 8: Double Pointers</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-9-putting-it-all-together" class="nav-link node-name--H2 ">Exercise 9: Putting It All Together</a><ul class="toc-list nav flex-column is-collapsible is-collapsed"><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#action-item" class="nav-link node-name--H3 ">Action Item</a></li></ul></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-10-reflection-and-feedback-form" class="nav-link node-name--H2 ">Exercise 10: Reflection and Feedback Form</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#submission" class="nav-link node-name--H2 ">Submission</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#common-gdb-errors" class="nav-link node-name--H2 ">Common GDB Errors</a><ul class="toc-list nav flex-column is-collapsible is-collapsed"><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#gdb-is-skipping-over-lines-of-code" class="nav-link node-name--H3 ">GDB is skipping over lines of code</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#gdb-isn-t-loading-my-file" class="nav-link node-name--H3 ">GDB isn't loading my file</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#how-do-i-switch-between-the-code-window-and-the-console" class="nav-link node-name--H3 ">How do I switch between the code window and the console?</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#i-m-stuck-in-the-code-window" class="nav-link node-name--H3 ">I'm stuck in the code window</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#the-text-ui-is-garbled" class="nav-link node-name--H3 ">The text UI is garbled</a></li></ul></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#other-useful-gdb-commands-recommended" class="nav-link node-name--H2 ">Other Useful GDB Commands (Recommended)</a><ul class="toc-list nav flex-column is-collapsible is-collapsed"><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#command-info-locals" class="nav-link node-name--H3 ">Command: info locals</a></li><li class="nav-item"><a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#command-command" class="nav-link node-name--H3 ">Command: command</a></li></ul></li></ul></nav>
<div id="toc-content-wrapper" class="content col-md-9">
<h1 class="title">Lab 2: C Debugging</h1>
<p class="subtitle">Deadline: Tuesday, January 30, 11:59:59 PM PT</p>
<p>For this lab, please complete the exercises in the order listed. The exercises may depend on each other.</p>
<p><a href="https://web.archive.org/web/20240301065845/https://docs.google.com/presentation/d/1LQo7bBrhdkzhA30YcFq2NKegNNmVn1AHjwZKrjk7Rr8/edit?usp=sharing">Lab Slides</a></p>
<hr>
<h2 id="setup">Setup</h2>
<div class="alert alert-warning">
<p>You must complete this lab on the hive machines. See <a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab00/">Lab 0</a> for a refresher on using them.</p>
</div>
<p>In your <code>labs</code> directory, pull the files for this lab with:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> pull starter main</span>
</span></code></pre>
<p>If you get an error like the following:</p>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">fatal: 'starter' does not appear to be a git repository
fatal: Could not read from remote repository.
</span></code></pre>
<p>make sure to set the starter remote as follows:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> remote add starter https://github.com/61c-teach/sp24-lab-starter.git</span>
</span></code></pre>
<p>and run the original command again.</p>
<p>If you run into any <code>git</code> errors, please check out the <a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/resources/common-errors/">common errors</a> page.</p>
<hr>
<h2 id="review-pointers">Review: Pointers</h2>
<p>A pointer is a variable whose value is the memory address of another variable. Note that every variable declaration is always located in a memory, where every element has a corresponding address. Think of it like an array: every variable value is contained on a specific array index (address), and the pointer to that variable is another variable within that same array that contains the index (address) of the variable it is pointing at.</p>
<p>Consider the following example:</p>
<pre data-lang="c" class="language-c z-code"><code class="language-c" data-lang="c"><span class="z-source z-c"><span class="z-storage z-type z-c">int</span> <span class="z-meta z-function z-c"><span class="z-entity z-name z-function z-c">main</span></span><span class="z-meta z-function z-parameters z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function z-parameters z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-meta z-function z-c"> </span><span class="z-meta z-function z-c"><span class="z-meta z-block z-c"><span class="z-punctuation z-section z-block z-begin z-c">{</span></span></span><span class="z-meta z-function z-c"><span class="z-meta z-block z-c">
    <span class="z-storage z-type z-c">int</span> my_var <span class="z-keyword z-operator z-assignment z-c">=</span> <span class="z-constant z-numeric z-integer z-decimal z-c">20</span><span class="z-punctuation z-terminator z-c">;</span>
    <span class="z-storage z-type z-c">int</span><span class="z-keyword z-operator z-c">*</span> my_var_p<span class="z-punctuation z-terminator z-c">;</span>
    my_var_p <span class="z-keyword z-operator z-assignment z-c">=</span> <span class="z-keyword z-operator z-c">&amp;</span>my_var<span class="z-punctuation z-terminator z-c">;</span>
</span></span><span class="z-meta z-function z-c"><span class="z-meta z-block z-c"><span class="z-punctuation z-section z-block z-end z-c">}</span></span></span>
</span></code></pre>
<p>For the first line, we declared an <code>int</code> variable called <code>my_var</code> which is then assigned with a value of 20. That value of 20 will be placed somewhere in the memory.</p>
<p>For the second line, we declared an <code>int</code> pointer variable called <code>my_var_p</code>. Note that you can also write <code>int *my_var_p</code>, where the asterisk glued to the variable name instead of the variable type.</p>
<p>For the third line, we assigned <code>my_var_p</code> to have a value that is equal to the address of <code>my_var</code>. This is done by using the <code>&amp;</code> operator before the <code>my_var</code> variable. At this point, the value contained in the variable <code>my_var_p</code> is the address in memory of the variable <code>my_var</code>.</p>
<p>Note that whenever you want to change the value of <code>my_var</code>, you could do it by changing <code>my_var</code> directly.</p>
<pre data-lang="c" class="language-c z-code"><code class="language-c" data-lang="c"><span class="z-source z-c">my_var <span class="z-keyword z-operator z-assignment z-augmented z-c">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-c">2</span><span class="z-punctuation z-terminator z-c">;</span>
</span></code></pre>
<p>Alternatively, you could also change the value of <code>my_var</code> by dereferencing <code>my_var_p</code></p>
<pre data-lang="c" class="language-c z-code"><code class="language-c" data-lang="c"><span class="z-source z-c"><span class="z-keyword z-operator z-c">*</span>my_var_p <span class="z-keyword z-operator z-assignment z-augmented z-c">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-c">2</span><span class="z-punctuation z-terminator z-c">;</span>
</span></code></pre>
<p>In a nutshell, <code>&amp;x</code> gets the address of <code>x</code>, while <code>*x</code> gets the contents at address <code>x</code>.</p>
<p>Here's a more complete example:</p>
<pre data-lang="c" class="language-c z-code"><code class="language-c" data-lang="c"><span class="z-source z-c"><span class="z-storage z-type z-c">int</span> <span class="z-meta z-function z-c"><span class="z-entity z-name z-function z-c">main</span></span><span class="z-meta z-function z-parameters z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function z-parameters z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-meta z-function z-c"> </span><span class="z-meta z-function z-c"><span class="z-meta z-block z-c"><span class="z-punctuation z-section z-block z-begin z-c">{</span></span></span><span class="z-meta z-function z-c"><span class="z-meta z-block z-c">
    <span class="z-storage z-type z-c">int</span> my_var <span class="z-keyword z-operator z-assignment z-c">=</span> <span class="z-constant z-numeric z-integer z-decimal z-c">20</span><span class="z-punctuation z-terminator z-c">;</span>
    <span class="z-storage z-type z-c">int</span><span class="z-keyword z-operator z-c">*</span> my_var_p<span class="z-punctuation z-terminator z-c">;</span>
    my_var_p <span class="z-keyword z-operator z-assignment z-c">=</span> <span class="z-keyword z-operator z-c">&amp;</span>my_var<span class="z-punctuation z-terminator z-c">;</span>

    <span class="z-meta z-function-call z-c"><span class="z-support z-function z-C99 z-c">printf</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-string z-quoted z-double z-c"><span class="z-punctuation z-definition z-string z-begin z-c">"</span>Address of my_var: <span class="z-constant z-other z-placeholder z-c">%p</span><span class="z-constant z-character z-escape z-c">\n</span><span class="z-punctuation z-definition z-string z-end z-c">"</span></span><span class="z-punctuation z-separator z-c">,</span> my_var_p</span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-punctuation z-terminator z-c">;</span>
    <span class="z-meta z-function-call z-c"><span class="z-support z-function z-C99 z-c">printf</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-string z-quoted z-double z-c"><span class="z-punctuation z-definition z-string z-begin z-c">"</span>Address of my_var: <span class="z-constant z-other z-placeholder z-c">%p</span><span class="z-constant z-character z-escape z-c">\n</span><span class="z-punctuation z-definition z-string z-end z-c">"</span></span><span class="z-punctuation z-separator z-c">,</span> <span class="z-keyword z-operator z-c">&amp;</span>my_var</span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-punctuation z-terminator z-c">;</span>
    <span class="z-meta z-function-call z-c"><span class="z-support z-function z-C99 z-c">printf</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-string z-quoted z-double z-c"><span class="z-punctuation z-definition z-string z-begin z-c">"</span>Address of my_var_p: <span class="z-constant z-other z-placeholder z-c">%p</span><span class="z-constant z-character z-escape z-c">\n</span><span class="z-punctuation z-definition z-string z-end z-c">"</span></span><span class="z-punctuation z-separator z-c">,</span> <span class="z-keyword z-operator z-c">&amp;</span>my_var_p</span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-punctuation z-terminator z-c">;</span>

    <span class="z-keyword z-operator z-c">*</span>my_var_p <span class="z-keyword z-operator z-assignment z-augmented z-c">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-c">2</span><span class="z-punctuation z-terminator z-c">;</span>

    <span class="z-meta z-function-call z-c"><span class="z-support z-function z-C99 z-c">printf</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-string z-quoted z-double z-c"><span class="z-punctuation z-definition z-string z-begin z-c">"</span>my_var: <span class="z-constant z-other z-placeholder z-c">%d</span><span class="z-constant z-character z-escape z-c">\n</span><span class="z-punctuation z-definition z-string z-end z-c">"</span></span><span class="z-punctuation z-separator z-c">,</span> my_var</span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-punctuation z-terminator z-c">;</span>
    <span class="z-meta z-function-call z-c"><span class="z-support z-function z-C99 z-c">printf</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-string z-quoted z-double z-c"><span class="z-punctuation z-definition z-string z-begin z-c">"</span>my_var: <span class="z-constant z-other z-placeholder z-c">%d</span><span class="z-constant z-character z-escape z-c">\n</span><span class="z-punctuation z-definition z-string z-end z-c">"</span></span><span class="z-punctuation z-separator z-c">,</span> <span class="z-keyword z-operator z-c">*</span>my_var_p</span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-punctuation z-terminator z-c">;</span>
</span></span><span class="z-meta z-function z-c"><span class="z-meta z-block z-c"><span class="z-punctuation z-section z-block z-end z-c">}</span></span></span>
</span></code></pre>
<p>A sample execution of this code gave out the following:</p>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">Address of my_var: 0x7fffebafb32c
Address of my_var: 0x7fffebafb32c
Address pf my_var_p: 0x7fffebafb330
my_var: 22
my_var: 22
</span></code></pre>
<p>The first line prints out the value of <code>my_var_p</code>, which was assigned to the address of the variable <code>my_var</code>.</p>
<p>The second line shows that <code>my_var_p</code> is indeed equal to <code>&amp;my_var</code>, the address of the variable <code>my_var</code>.</p>
<p>The third line prints out the address of <code>my_var_p</code>. Note that since <code>my_var_p</code> is in fact a variable itself (the variable type is an int pointer), therefore it has to be placed somewhere in the memory as well. Thus, printing out <code>&amp;my_var_p</code> allows us to see where in the memory the <code>my_var_p</code> variable is located.</p>
<p>After the first three print outs, we changed the value of <code>my_var</code> indirectly using <code>*my_var_p</code>. Since <code>my_var_p</code> is a pointer to <code>my_var</code> (i.e. <code>my_var_p</code> is the address of <code>my_var</code>), performing <code>*my_var_p</code> allows us to modify the contents at the address in <code>my_var_p</code>.</p>
<p>The fourth line shows that we have indeed modified <code>my_var</code>, since the value is now 22.</p>
<p>The fifth line confirms that <code>*my_var_p</code> is indeed equal to <code>my_var</code>.</p>

<details>
<summary>What happens if we did the following: <code>my_var_p += 2</code>?</summary>
<p><code>my_var_p</code> is a pointer to an int. <code>sizeof(int)</code> = 4. Therefore, pointer arithmetic will add 2 * 4 = 8
The value in <code>my_var_p</code> updates to <code>0x7fffebafb32c</code> + 8 = <code>0x7fffebafb334</code></p>
</details>
<details>
<summary>After doing <code>my_var_p += 2</code> earlier, what is the value of <code>&amp;my_var_p</code>?</summary>
<p>The address of <code>my_var_p</code> will remain the same: <code>0x7fffebafb330</code></p>
</details>
<details>
<summary>After doing <code>my_var_p += 2</code> earlier, what happens then if we try to print the value of <code>*my_var_p</code>?</summary>
<p>Since the value of <code>my_var_p</code> has changed, it is now pointing to a different location in memory. The behavior is undefined. It will either print out a garbage data on that specific memory location, or the program crashes with a segmentation fault if you try to access a protected memory segment.</p>
</details>
<h2 id="exercise-1-pointers-to-stack-vs-heap">Exercise 1: Pointers to Stack vs Heap</h2>
<p><strong>Edit</strong> <code>ex1_ptr_heap_stack.c</code> using your editor of choice and fill in the blanks. Feel free to refer back to <a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#review-pointers">the pointer review section</a> if you are stuck.</p>
<p><strong>Compile and run</strong> the program and <strong>check</strong> that the output matches what you expect. You will see a compiler warning. What does it mean?</p>
<p><strong>Read</strong> the output of <code>gcc</code>. Note that it throws an error about the address of a stack variable being returned. Similarly, the output of the program should show address of the stack variable as <code>(nil)</code>, indicating that it is not usable. This is because <code>x</code> cannot be accessed outside of the function <code>int_on_stack</code> using a pointer. In the future, make sure to allocate memory on the heap if you'd like to use it later.</p>
<h2 id="exercise-2-compiler-warnings-and-errors">Exercise 2: Compiler Warnings and Errors</h2>
<p>Compiler warnings are generated to help you find potential bugs in your code. Make sure that you fix all of your compiler warnings before you attempt to run your code. This will save you a lot of time debugging in the future because fixing the compiler warnings is much faster than trying to find the bug on your own.</p>
<ol>
<li>
<p><strong>Read</strong> over the code in <code>ex2_compiler_warnings.c</code>.</p>
</li>
<li>
<p><strong>Compile</strong> your program with <code>gcc -o ex2_compiler_warnings ex2_compiler_warnings.c</code>. You should see 3 warnings.</p>
</li>
<li>
<p><strong>Read</strong> the first line of the first warning. The line begins with <code>ex2_compiler_warnings.c:13:22</code>, which tells you that the warning is caused by line 13 of <code>ex2_compiler_warnings.c</code>. The warning states that the program is trying to assign a <code>char</code> to a <code>char *</code>.</p>
</li>
<li>
<p><strong>Open</strong> <code>ex2_compiler_warnings.c</code> and <strong>navigate</strong> to the line that's causing the warning. It is trying to assign a <code>char</code> to a <code>char *</code>. The compiler has pointed this out as a potential error because we should not be assigning a <code>char</code> to a <code>char *</code>.</p>
</li>
<li>
<p><strong>Fix</strong> this compiler warning.</p>
</li>
<li>
<p><strong>Recompile</strong> your code. You can now see that this warning does not appear anymore and there are 2 warnings left.</p>
</li>
<li>
<p><strong>Fix</strong> the remaining compiler warnings in <code>ex2_compiler_warnings.c</code>.</p>
</li>
</ol>
<h2 id="what-is-gdb">What is GDB?</h2>
<p>Here is an excerpt from the <a href="https://web.archive.org/web/20240301065845/https://www.gnu.org/software/gdb/">GDB website</a>:</p>
<p>GDB, the GNU Project debugger, allows you to see what is going on 'inside' another program while it executes -- or what another program was doing at the moment it crashed.</p>
<p>GDB can do four main kinds of things (plus other things in support of these) to help you catch bugs in the act:</p>
<ul>
<li>Start your program, specifying anything that might affect its behavior.</li>
<li>Make your program stop on specified conditions.</li>
<li>Examine what has happened, when your program has stopped.</li>
<li>Change things in your program, so you can experiment with correcting the effects of one bug and go on to learn about another.</li>
</ul>
<p>In this class, we will be using <a href="https://web.archive.org/web/20240301065845/https://cgdb.github.io/">CGDB</a> which provides a lightweight interface to gdb to make it easier to use. CGDB is already installed on the hive machines, so there is no installation required. The remainder of this class uses CGDB and GDB interchangeably.</p>
<p>Here's a <a href="https://web.archive.org/web/20240301065845/https://inst.eecs.berkeley.edu/%7Ecs61c/resources/gdb5-refcard.pdf">GDB reference card</a>.</p>
<p>If you run into any issues with GDB, see <a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#common-gdb-errors">the Common GDB Errors section below</a></p>
<h2 id="exercise-3-intro-to-gdb">Exercise 3: Intro to GDB</h2>
<p>In this section, you will learn the GDB commands <code>start</code>, <code>step</code>, <code>next</code>, <code>finish</code>, <code>print</code>, and <code>quit</code>. This section will resolve bug(s) along the way. Make sure to fix the bug(s) in the code before moving on.</p>
<p>The table below is a summary of the above commands</p>
<table><thead><tr><th>Command</th><th>Abbreviation</th><th>Description</th></tr></thead><tbody>
<tr><td>start</td><td>N/A</td><td>begin running the program and stop at line 1 in main</td></tr>
<tr><td>step</td><td>s</td><td>execute the current line of code (this command will step into functions)</td></tr>
<tr><td>next</td><td>n</td><td>execute the current line of code (this command will not step into functions)</td></tr>
<tr><td>finish</td><td>fin</td><td>executes the remainder of the current function and returns to the calling function</td></tr>
<tr><td>print [arg]</td><td>p</td><td>prints the value of the argument</td></tr>
<tr><td>quit</td><td>q</td><td>exits gdb</td></tr>
</tbody></table>
<p>You should be filling in <code>ex3_commands.txt</code> with the corresponding commands. Please only use the commands from the table above. <strong>For correctness, we will be checking the output of your <code>ex3_commands.txt</code> against a desired output.</strong> We'd recommend opening two SSH windows so you can have the commands file and the <code>cgdb</code> session at the same time. Even though you are adding to <code>ex3_commands.txt</code>, please check your work by actually running these commands in <code>cgdb</code>.</p>
<ol>
<li>
<p><strong>Compile</strong> your program with the <code>-g</code> flag. This will include additional debugging information in the executable that CGDB needs.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">gcc</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>g</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> pwd_checker test_pwd_checker.c pwd_checker.c</span>
</span></code></pre>
</li>
<li>
<p><strong>Start</strong> <code>cgdb</code>. Note that you should be using the executable (<code>pwd_checker</code>) as the argument, not the source file (<code>pwd_checker.c</code>).</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cgdb</span></span><span class="z-meta z-function-call z-arguments z-shell"> pwd_checker</span>
</span></code></pre>
<p>You should now see CGDB open. The top window displays our code and the bottom window displays the console.</p>
</li>
</ol>
<p>For each of the following steps, add the CGDB commands you execute to <code>ex3_commands.txt</code>. Each command should be on its own line. Each step below will require one or more CGDB commands.</p>
<ol>
<li>
<p><strong>Start</strong> your program so that it's at the first line in <code>main</code>, using one command.</p>
</li>
<li>
<p>The first line in <code>main</code> is a call to <code>printf</code>. We do not want to step into this function. <strong>Step over</strong> this line in the program.</p>
</li>
<li>
<p><strong>Step until</strong> the program is on the <code>check_password</code> call. Note that the line with an arrow next to it is the line we're currently on, but has not been executed yet.</p>
</li>
<li>
<p><strong>Step into</strong> <code>check_password</code>.</p>
</li>
<li>
<p><strong>Step into</strong> <code>check_lower</code>.</p>
</li>
<li>
<p><strong>Print</strong> the value of <code>password</code> (<code>password</code> is a string).</p>
</li>
<li>
<p><strong>Step out</strong> of <code>check_lower</code> immediately. Do not step until the function returns.</p>
</li>
<li>
<p><strong>Step into</strong> <code>check_length</code>.</p>
</li>
<li>
<p><strong>Step to</strong> the last line of the function.</p>
</li>
<li>
<p><strong>Print</strong> the return value of the function. The return value should be <code>false</code>.</p>
</li>
<li>
<p><strong>Print</strong> the value of <code>length</code>. It looks like <code>length</code> was correct, so there must be some logic issue on line 24.</p>
</li>
<li>
<p><strong>Quit</strong> CGDB. CGDB might ask you if you want to quit, type <code>y</code> (but do not add <code>y</code> to <code>ex3_commands.txt</code>).</p>
</li>
</ol>
<p>At this point, your <code>ex3_commands.txt</code> should contain a list of commands from the steps above. You don't need to add anything from the steps below to your <code>ex3_commands.txt</code>.</p>
<ol>
<li>
<p><strong>Fix</strong> the bug on line 24.</p>
</li>
<li>
<p><strong>Compile</strong> and <strong>run</strong> your code.</p>
</li>
<li>
<p>The program still fails. Open and step through <code>cgdb</code> again, you should see that <code>check_number</code> is now failing. We will address this in the next exercise.</p>
</li>
</ol>
<h2 id="exercise-4-more-gdb">Exercise 4: More GDB</h2>
<p>In this section, you will learn the gdb commands <code>break</code>, <code>conditional break</code>, <code>run</code>, and <code>continue</code>. This section will resolve bug(s) along the way. Make sure to fix the bug(s) in the code before moving on.</p>
<p>The table below is a summary of the above commands</p>
<table><thead><tr><th>Command</th><th>Abbreviation</th><th>Description</th></tr></thead><tbody>
<tr><td>break [line num or function name]</td><td>b</td><td>set a breakpoint at the specified location, use <code>filename.c:linenum</code> to set a breakpoint in a specific file</td></tr>
<tr><td>conditional break (ex: break 3 if n==4)</td><td>(ex: b 3 if n==4)</td><td>set a breakpoint at the specified location only if a given condition is met</td></tr>
<tr><td>run</td><td>r</td><td>execute the program until termination or reaching a breakpoint</td></tr>
<tr><td>continue</td><td>c</td><td>continues the execution of a program that was paused</td></tr>
</tbody></table>
<p>You should be filling in <code>ex4_commands.txt</code> with the corresponding commands. Please only use the commands from the table above and the table for exercise 2. <strong>For correctness, we will be checking the output of your <code>ex4_commands.txt</code> against a desired output.</strong> We'd recommend opening two SSH windows so you can have the commands file and the <code>cgdb</code> session at the same time. Even though you are adding to <code>ex4_commands.txt</code>, please check your work by actually running these commands in <code>cgdb</code>.</p>
<ol>
<li>
<p><strong>Recompile and run</strong> your code. You should see that the assertion <code>number</code> is failing</p>
</li>
<li>
<p><strong>Start</strong> cgdb</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cgdb</span></span><span class="z-meta z-function-call z-arguments z-shell"> pwd_checker</span>
</span></code></pre>
</li>
</ol>
<p>For each of the following steps, add the CGDB commands you execute to <code>ex4_commands.txt</code>. Each command should be on its own line. Each step below will require one or more CGDB commands.</p>
<ol>
<li>
<p><strong>Set a breakpoint</strong> in our code to jump straight into the function <code>check_number</code> using the function name (not the filename or line number). Your breakpoint should not be in <code>check_password</code>.</p>
</li>
<li>
<p><strong>Run</strong> the program.
Your code should run until it gets to the breakpoint that we just set.</p>
</li>
<li>
<p><strong>Step into</strong> <code>check_range</code>.</p>
</li>
<li>
<p>Recall that the numbers do not appear until later in the password. Instead of stepping through all of the non-numerical characters at the beginning of password, we can jump straight to the point in the code where the numbers are being compared using a conditional breakpoint. A conditional breakpoint will only stop the program based on a given condition. The first number in the password <code>0</code>, so we can set the breakpoint when <code>letter</code> is <code>'0'</code>. <strong>Break on line 31 if the <code>letter</code> is <code>'0'</code></strong>.</p>
<p>We are using the single quote because <code>0</code> is a char.</p>
</li>
<li>
<p><strong>Continue executing</strong> your code after it stops at a breakpoint.</p>
</li>
<li>
<p>The code has stopped at the conditional breakpoint. To verify this, <strong>print</strong> <code>letter</code>.</p>
<p>It should print <code>48 '0'</code> which is a decimal number followed by it's corresponding ASCII representation. If you look at an <a href="https://web.archive.org/web/20240301065845/https://www.cs.cmu.edu/%7Epattis/15-1XX/common/handouts/ascii.html">ASCII table</a>, you can see that <code>48</code> is the decimal representation of the character <code>0</code>.</p>
</li>
<li>
<p>Let's take a look at the return value of <code>check_range</code>. <strong>Print</strong> <code>is_in_range</code>. The result is <code>false</code>. That's strange. <code>'0'</code> should be in the range.</p>
</li>
<li>
<p>Let's look at the upper and lower bounds of the range. <strong>Print</strong> <code>lower</code>.</p>
</li>
<li>
<p><strong>Print</strong> <code>upper</code>.</p>
</li>
<li>
<p>Ahah! The ASCII representation of <code>lower</code> is <code>\000</code>(the null terminator) and the ASCII representation of <code>upper</code> is <code>\t</code>. It looks like we passed in the numbers <code>0</code> and <code>9</code> instead of the characters <code>'0'</code> and <code>'9'</code>!</p>
</li>
<li>
<p><strong>Quit</strong> CGDB. CGDB might ask you if you want to quit, type <code>y</code> (but do not add <code>y</code> to <code>ex4_commands.txt</code>).</p>
</li>
</ol>
<p>At this point, your <code>ex4_commands.txt</code> should contain a list of commands from the steps above. You don't need to add anything from the steps below to your <code>ex4_commands.txt</code>.</p>
<ol>
<li>
<p><strong>Fix</strong> the bug.</p>
</li>
<li>
<p><strong>Compile</strong> and <strong>run</strong> your code. There's one more error, which you will find in <a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab02/#exercise-5-debug">exercise 5</a>.</p>
</li>
</ol>
<h2 id="exercise-5-debug">Exercise 5: Debug</h2>
<ol>
<li><strong>Debug</strong> <code>check_upper</code> on your own using the commands you just learned. The function appears to be returning <code>false</code> even though there's an uppercase letter. Hint: the bug itself may not be in <code>check_upper</code> itself.</li>
</ol>
<h2 id="valgrind">Valgrind</h2>
<p>Even with a debugger, we might not be able to catch all bugs. Some bugs are what we refer to as "bohrbugs", meaning they manifest reliably under a well-defined, but possibly unknown, set of conditions. Other bugs are what we call "heisenbugs", and instead of being determinant, they're known to disappear or alter their behavior when one attempts to study them. We can detect the first kind with debuggers, but the second kind may slip under our radar because they're (at least in C) often due to mis-managed memory. Remember that unlike other programming languages, C requires you (the programmer) to manually manage your memory.</p>
<p>We can use a tool called Valgrind to help catch to help catch "heisenbugs" and "bohrbugs". Valgrind is a program which emulates your CPU and tracks your memory accesses. This slows down the process you're running (which is why we don't, for example, always run all executables inside Valgrind) but also can expose bugs that may only display visible incorrect behavior under a unique set of circumstances.</p>
<p>Let's take a look at the <code>bork</code> translation program! Bork is an ancient language that is very similar to English. To translate a word to Bork, you take the English word and add an 'f' after every vowel in the word.</p>
<p>Let's see if we can understand some Bork. Compile and run <code>bork</code> using the following commands.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">gcc</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>g</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> bork bork.c</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">./bork</span></span><span class="z-meta z-function-call z-arguments z-shell"> hello</span>
</span></code></pre>
<p>An example output is provided below. Note that your output will probably look different.</p>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">Input string: "hello"
Length of translated string: 21
Translate to Bork: "hefl2?^?Ul2?^?Uof?^?U"
</span></code></pre>
<p>Hmm, Bork is an old language, but there shouldn't be all of these strange characters. It seems that perhaps the ancients left some bugs in their program! Shall we embark on a journey to squash bugs and uncover the true beauty of Bork?</p>
<p>If we take a brief glance at <code>main</code>, we can see that we are taking an input string (<code>src_str</code>) and translating it to Bork (<code>dest_str</code>). If we scroll to the top, we can see that we have a function (<code>alloc_str</code>) to allocate space for a string in the heap, a <code>Str</code> struct which contains a string and it's length, a <code>make_str</code> function which will create a <code>Str</code> struct and initialize its <code>data</code> and <code>len</code> field, and a function to free our struct's data. There is also a function to concate two strings together and another function to translate a letter to Bork. Now this is quite a long program to debug.</p>
<p>Wouldn't it be nice if there were a tool that gave us a good first place to look?</p>
<p>Well as it turns out, there are a couple and <code>valgrind</code> is one of them!</p>
<p>Let's run <code>valgrind</code> on our program using the following command.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">valgrind</span></span><span class="z-meta z-function-call z-arguments z-shell"> ./bork hello</span>
</span></code></pre>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Memcheck,</span></span><span class="z-meta z-function-call z-arguments z-shell"> a memory error detector</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Copyright</span></span><span class="z-meta z-function-call z-arguments z-shell"> (C</span><span class="z-meta z-function-call z-shell"></span>) <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2002-2017,</span></span><span class="z-meta z-function-call z-arguments z-shell"> and GNU GPL<span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">'</span>d, by Julian Seward et al.
==10170== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==10170== Command: ./bork hello
==10170==
==10170== Invalid read of size 1
==10170==    at 0x4C34D04: strlen (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==10170==    by 0x10879F: make_Str (bork.c:22)
==10170==    by 0x108978: translate_to_bork (bork.c:56)
==10170==    by 0x1089F2: main (bork.c:68)
==10170==  Address 0x522f041 is 0 bytes after a block of size 1 alloc<span class="z-punctuation z-definition z-string z-end z-shell">'</span></span>d</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">at</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x4C31B0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">by</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x108781: alloc_str (bork.c:10</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">by</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x10895E: translate_to_bork (bork.c:54</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">by</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x1089F2: main (bork.c:68</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Invalid</span></span><span class="z-meta z-function-call z-arguments z-shell"> read of size 1</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">at</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x4C34D04: strlen (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">by</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x10879F: make_Str (bork.c:22</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">by</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x108952: translate_to_bork (bork.c:51</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">by</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x1089F2: main (bork.c:68</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Address</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x522f0e2 is 0 bytes after a block of size 2 alloc<span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">'</span>d
==10170==    at 0x4C31B0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==10170==    by 0x108781: alloc_str (bork.c:10)
==10170==    by 0x10892D: translate_to_bork (bork.c:48)
==10170==    by 0x1089F2: main (bork.c:68)
==10170==
Input string: "hello"
Length of translated string: 7
==10170== Invalid read of size 1
==10170==    at 0x4C34D04: strlen (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==10170==    by 0x4E9B4A2: vfprintf (vfprintf.c:1643)
==10170==    by 0x4EA2EE5: printf (printf.c:33)
==10170==    by 0x108A6F: main (bork.c:74)
==10170==  Address 0x522f317 is 0 bytes after a block of size 7 alloc<span class="z-punctuation z-definition z-string z-end z-shell">'</span></span>d</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">at</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x4C31B0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">by</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x108781: alloc_str (bork.c:10</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">by</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x108833: concat (bork.c:32</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">by</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0x108A15: main (bork.c:69</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Translate</span></span><span class="z-meta z-function-call z-arguments z-shell"> to Bork: <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>hefllof<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">HEAP</span></span><span class="z-meta z-function-call z-arguments z-shell"> SUMMARY:</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>     <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">in</span></span><span class="z-meta z-function-call z-arguments z-shell"> use at exit: 7 bytes in 1 blocks</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>   <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">total</span></span><span class="z-meta z-function-call z-arguments z-shell"> heap usage: 11 allocs, 10 frees, 1,051 bytes allocated</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">LEAK</span></span><span class="z-meta z-function-call z-arguments z-shell"> SUMMARY:</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">definitely</span></span><span class="z-meta z-function-call z-arguments z-shell"> lost: 7 bytes in 1 blocks</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">indirectly</span></span><span class="z-meta z-function-call z-arguments z-shell"> lost: 0 bytes in 0 blocks</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>      <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">possibly</span></span><span class="z-meta z-function-call z-arguments z-shell"> lost: 0 bytes in 0 blocks</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">still</span></span><span class="z-meta z-function-call z-arguments z-shell"> reachable: 0 bytes in 0 blocks</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>         <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">suppressed:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0 bytes in 0 blocks</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Rerun</span></span><span class="z-meta z-function-call z-arguments z-shell"> with<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>leak-check</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>full to see details of leaked memory</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">For</span></span><span class="z-meta z-function-call z-arguments z-shell"> counts of detected and suppressed errors, rerun with:<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>v</span></span>
<span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">=10170==</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ERROR</span></span><span class="z-meta z-function-call z-arguments z-shell"> SUMMARY: 6 errors from 3 contexts (suppressed: 0 from 0</span><span class="z-meta z-function-call z-shell"></span>)
</span></code></pre>
<p>(Interesting side note: when we look at the normal program output in this <code>valgrind</code> log, we see normal behavior (i.e. it prints "hefllof"). That's because the way <code>valgrind</code> runs our program is different than how our program runs "naturally" (aka "bare metal"). We're not going to get into that for now.)</p>
<p>But back on debugging: A good general rule of thumb to follow when parsing big error logs is to only consider the first error message (and ignore the rest), so let's do that:</p>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">==10170== Invalid read of size 1
==10170==    at 0x4C34D04: strlen (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==10170==    by 0x10879F: make_Str (bork.c:22)
==10170==    by 0x108978: translate_to_bork (bork.c:56)
==10170==    by 0x1089F2: main (bork.c:68)
</span></code></pre>
<p>The error message states that we are doing an invalid read of size 1. What does this mean? An invalid read means that your program is reading memory at a place that it shouldn't be (this can cause a segfault, but not always). Size 1 means that we were attempting to read 1 byte.</p>
<p>Because we're unfamiliar with this ancient codebase and we don't want to read all of it to find the bug, a good process to follow is to start at high-level details and work our way down (so basically work our way through the call stack that valgrind provides).</p>
<p>Let's look at <code>bork.c</code> line 68 in <code>main</code> (the botton of the stack):</p>
<pre data-lang="c" class="language-c z-code"><code class="language-c" data-lang="c"><span class="z-source z-c">Str bork_substr <span class="z-keyword z-operator z-assignment z-c">=</span> <span class="z-meta z-function-call z-c"><span class="z-variable z-function z-c">translate_to_bork</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c">src_str<span class="z-punctuation z-accessor z-c">.</span><span class="z-variable z-other z-member z-c">data</span><span class="z-meta z-brackets z-c"><span class="z-punctuation z-section z-brackets z-begin z-c">[</span>i<span class="z-punctuation z-section z-brackets z-end z-c">]</span></span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-punctuation z-terminator z-c">;</span>
</span></code></pre>
<p>Is something funky going on here? Looks like we are just passing a character to <code>translate_to_bork</code>. Seems ok so far.</p>
<p>Let's go farther down the call stack and look at <code>bork.c</code> line 56 in <code>translate_to_bork</code>:</p>
<pre data-lang="c" class="language-c z-code"><code class="language-c" data-lang="c"><span class="z-source z-c"><span class="z-keyword z-control z-flow z-return z-c">return</span> <span class="z-meta z-function-call z-c"><span class="z-variable z-function z-c">make_Str</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c">res</span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-punctuation z-terminator z-c">;</span>
</span></code></pre>
<p>We're just calling <code>make_Str</code> here. We should go deeper. Let's look at <code>bork.c</code> line 22.</p>
<pre data-lang="c" class="language-c z-code"><code class="language-c" data-lang="c"><span class="z-source z-c"><span class="z-keyword z-control z-flow z-return z-c">return</span> <span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span>Str<span class="z-punctuation z-section z-group z-end z-c">)</span></span><span class="z-meta z-block z-c"><span class="z-punctuation z-section z-block z-begin z-c">{</span><span class="z-punctuation z-accessor z-c">.</span><span class="z-variable z-other z-member z-c">data</span><span class="z-keyword z-operator z-assignment z-c">=</span>str<span class="z-punctuation z-separator z-c">,</span><span class="z-punctuation z-accessor z-c">.</span><span class="z-variable z-other z-member z-c">len</span><span class="z-keyword z-operator z-assignment z-c">=</span><span class="z-meta z-function-call z-c"><span class="z-support z-function z-C99 z-c">strlen</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c">str</span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-punctuation z-section z-block z-end z-c">}</span></span><span class="z-punctuation z-terminator z-c">;</span>
</span></code></pre>
<p>Here we are making a new <code>Str</code> struct and setting its <code>data</code> and <code>len</code> parameters. That seems normal too!</p>
<p>But <code>valgrind</code> says that <code>strlen</code> is doing an invalid read?</p>
<p>Well, we're passing a string to it right? What does <code>strlen</code> do again? It determines the length of a string by iterating over each character until it gets to a null terminator. Maybe there is no null terminator so <code>strlen</code> keeps going past the end of the string (which would mean that it's going past the area that we allocated for the string).</p>
<p>Let's make sure our string has a null terminator by checking where we created it.</p>
<p>Earlier, we saw this on line 56 in <code>translate_to_bork</code>.</p>
<pre data-lang="c" class="language-c z-code"><code class="language-c" data-lang="c"><span class="z-source z-c"><span class="z-keyword z-control z-flow z-return z-c">return</span> <span class="z-meta z-function-call z-c"><span class="z-variable z-function z-c">make_Str</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c">res</span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-punctuation z-terminator z-c">;</span>
</span></code></pre>
<p>If we look two lines up (line 54), we can see that we are allocating space for the string by calling <code>alloc_str</code>. Let's take a look at this function.</p>
<pre data-lang="c" class="language-c z-code"><code class="language-c" data-lang="c"><span class="z-source z-c"><span class="z-storage z-type z-c">char</span> <span class="z-keyword z-operator z-c">*</span><span class="z-meta z-function z-c"><span class="z-entity z-name z-function z-c">alloc_str</span></span><span class="z-meta z-function z-parameters z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function z-parameters z-c"><span class="z-meta z-group z-c"><span class="z-storage z-type z-c">int</span> <span class="z-variable z-parameter z-c">len</span><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-meta z-function z-c"> </span><span class="z-meta z-function z-c"><span class="z-meta z-block z-c"><span class="z-punctuation z-section z-block z-begin z-c">{</span></span></span><span class="z-meta z-function z-c"><span class="z-meta z-block z-c">
    <span class="z-keyword z-control z-flow z-return z-c">return</span> <span class="z-meta z-function-call z-c"><span class="z-support z-function z-C99 z-c">malloc</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c">len<span class="z-keyword z-operator z-c">*</span><span class="z-keyword z-operator z-word z-c">sizeof</span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-begin z-c">(</span></span><span class="z-meta z-group z-c"><span class="z-storage z-type z-c">char</span></span><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span></span><span class="z-meta z-function-call z-c"><span class="z-meta z-group z-c"><span class="z-punctuation z-section z-group z-end z-c">)</span></span></span><span class="z-punctuation z-terminator z-c">;</span>
</span></span><span class="z-meta z-function z-c"><span class="z-meta z-block z-c"><span class="z-punctuation z-section z-block z-end z-c">}</span></span></span>
</span></code></pre>
<p>Hmmm. It looks like <code>alloc_str</code> is giving us some memory that's only
<code>len</code> big, which means when we write to the string in <code>translate_to_bork</code>, we don't
have enough space for a null terminator!</p>
<p>Let's make the following change to fix the problem:</p>
<pre data-lang="diff" class="language-diff z-code"><code class="language-diff" data-lang="diff"><span class="z-source z-diff"><span class="z-meta z-diff z-range z-normal"><span class="z-meta z-range z-normal z-diff">10c10,12
</span></span><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">&lt;</span>     return malloc(len*sizeof(char));
</span><span class="z-meta z-separator z-diff"><span class="z-punctuation z-definition z-separator z-diff">---</span>
</span><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">&gt;</span>     char *data = malloc((len+1)*sizeof(char));
</span><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">&gt;</span>     data[len] = '\0';
</span><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">&gt;</span>     return data;
</span></span></code></pre>
<p>Let's run our program to see if we fixed the problem</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">./bork</span></span><span class="z-meta z-function-call z-arguments z-shell"> hello</span>
</span></code></pre>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">Input string: "hello"
Length of translated string: 7
Translate to Bork: "hefllof"
</span></code></pre>
<p>Everything looks like it's working properly. However, there could be hidden errors that we cannot see, so let's run our code through valgrind to make sure that there are no underlying issues.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">valgrind</span></span><span class="z-meta z-function-call z-arguments z-shell"> ./bork hello</span>
</span></code></pre>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">==29797== Memcheck, a memory error detector
==29797== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==29797== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==29797== Command: ./bork hello
==29797==
Input string: "hello"
Length of translated string: 7
Translate to Bork: "hefllof"
==29797==
==29797== HEAP SUMMARY:
==29797==     in use at exit: 8 bytes in 1 blocks
==29797==   total heap usage: 11 allocs, 10 frees, 1,061 bytes allocated
==29797==
==29797== LEAK SUMMARY:
==29797==    definitely lost: 8 bytes in 1 blocks
==29797==    indirectly lost: 0 bytes in 0 blocks
==29797==      possibly lost: 0 bytes in 0 blocks
==29797==    still reachable: 0 bytes in 0 blocks
==29797==         suppressed: 0 bytes in 0 blocks
==29797== Rerun with --leak-check=full to see details of leaked memory
==29797==
==29797== For counts of detected and suppressed errors, rerun with: -v
==29797== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
</span></code></pre>
<p>Let's take a look at the heap summary below. It tells us that we had 8 bytes in 1 block allocated at the time of exit. This means that the memory in the heap that was not free'd stems from one allocation call and that it is 8 bytes large.</p>
<p>Next, we can see the heap summary which shows that we made 11 allocation calls and 10 frees over the lifetime of the program.</p>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">==29797== HEAP SUMMARY:
==29797==     in use at exit: 8 bytes in 1 blocks
==29797==   total heap usage: 11 allocs, 10 frees, 1,061 bytes allocated
</span></code></pre>
<p>Now let's take a look at the leak summary below. This just states that we lost 8 bytes in 1 block.</p>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">==29797== LEAK SUMMARY:
==29797==    definitely lost: 8 bytes in 1 blocks
==29797==    indirectly lost: 0 bytes in 0 blocks
==29797==      possibly lost: 0 bytes in 0 blocks
==29797==    still reachable: 0 bytes in 0 blocks
==29797==         suppressed: 0 bytes in 0 blocks
==29797== Rerun with --leak-check=full to see details of leaked memory
</span></code></pre>
<p>It tells us to "Rerun with --leak-check=full to see details of leaked memory", so let's do that.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">valgrind</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>leak-check</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>full ./bork hello</span>
</span></code></pre>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">==32334== Memcheck, a memory error detector
==32334== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==32334== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==32334== Command: ./bork hello
==32334==
Input string: "hello"
Length of translated string: 7
Translate to Bork: "hefllof"
==32334==
==32334== HEAP SUMMARY:
==32334==     in use at exit: 8 bytes in 1 blocks
==32334==   total heap usage: 11 allocs, 10 frees, 1,061 bytes allocated
==32334==
==32334== 8 bytes in 1 blocks are definitely lost in loss record 1 of 1
==32334==    at 0x4C31B0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==32334==    by 0x108784: alloc_str (in /home/cc/cs61c/fa22/staff/cs61c-tac/bork)
==32334==    by 0x10884E: concat (in /home/cc/cs61c/fa22/staff/cs61c-tac/bork)
==32334==    by 0x108A30: main (in /home/cc/cs61c/fa22/staff/cs61c-tac/bork)
==32334==
==32334== LEAK SUMMARY:
==32334==    definitely lost: 8 bytes in 1 blocks
==32334==    indirectly lost: 0 bytes in 0 blocks
==32334==      possibly lost: 0 bytes in 0 blocks
==32334==    still reachable: 0 bytes in 0 blocks
==32334==         suppressed: 0 bytes in 0 blocks
==32334==
==32334== For counts of detected and suppressed errors, rerun with: -v
==32334== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
</span></code></pre>
<p>Now Valgrind is telling us the location where the unfree'd block was initially allocated. Let's take a look at this below. If we follow the call stack, we can see that <code>malloc</code> was called by <code>alloc_str</code> which was called by <code>concat</code> in <code>main</code>.</p>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">==32334== 8 bytes in 1 blocks are definitely lost in loss record 1 of 1
==32334==    at 0x4C31B0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==32334==    by 0x108784: alloc_str (in /home/cc/cs61c/fa22/staff/cs61c-tac/bork)
==32334==    by 0x10884E: concat (in /home/cc/cs61c/fa22/staff/cs61c-tac/bork)
==32334==    by 0x108A30: main (in /home/cc/cs61c/fa22/staff/cs61c-tac/bork)
</span></code></pre>
<p>If we look in <code>main</code>, we can see that we allocate the space for <code>dest_str</code> by calling <code>concat</code>, but we never free it. We need <code>dest_str</code> until the end of the program, so let's free it right before we return from <code>main</code>. This struct was allocated on the stack in main (<code>Str dest_str={};</code>), so we do not need to free the struct itself. However, the data that the struct points to was allocated in the heap. Therefore, we only need to free this portion of the struct. If you take a look near the top of the program, we have already provided a function <code>free_Str</code> to free the allocated portion of the struct. Let's call this function at the end of our program.</p>
<pre data-lang="diff" class="language-diff z-code"><code class="language-diff" data-lang="diff"><span class="z-source z-diff"><span class="z-meta z-diff z-range z-normal"><span class="z-meta z-range z-normal z-diff">76a77
</span></span><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">&gt;</span>     free_Str(dest_str);
</span></span></code></pre>
<p>You might be wondering why we are not freeing <code>src_str</code>. If we take a look at where we constructed <code>src_str</code> (<code>Str src_str = make_Str(argv[1]);</code>), we can see that it was created using <code>make_str</code> which does not make any calls to allocate space on the heap. The string that we are using to make <code>src_str</code> comes from <code>argv[1]</code>. The program that calls main is responsible for setting up <code>argv[1]</code>, so we don't have to worry about it.</p>
<p>Once we fix our error, the valgrind output should look like this. The heap summary shows that there are no blocks allocated at the time we exit. The error summary at the bottom shows us that there are no errors to report.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">valgrind</span></span><span class="z-meta z-function-call z-arguments z-shell"> ./bork hello</span>
</span></code></pre>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">==10835== Memcheck, a memory error detector
==10835== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==10835== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==10835== Command: ./bork hello
==10835==
Input string: "hello"
Length of translated string: 7
Translate to Bork: "hefllof"
==10835==
==10835== HEAP SUMMARY:
==10835==     in use at exit: 0 bytes in 0 blocks
==10835==   total heap usage: 11 allocs, 11 frees, 1,061 bytes allocated
==10835==
==10835== All heap blocks were freed -- no leaks are possible
==10835==
==10835== For counts of detected and suppressed errors, rerun with: -v
==10835== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
</span></code></pre>
<h2 id="exercise-6-using-valgrind-to-find-segfaults">Exercise 6: Using Valgrind to find segfaults</h2>
<p>There's a bug in <code>ex6_valgrind</code>, let's see how we can detect it with valgrind.</p>
<ol>
<li>
<p><strong>Compile</strong> <code>ex6_valgrind.c</code>. Notice that there are no compiler errors or warnings, and we're using the <code>-g</code> flag in case we need to debug this program in the future.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">gcc</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>g</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> ex6_valgrind ex6_valgrind.c</span>
</span></code></pre>
</li>
<li>
<p><strong>Run</strong> <code>ex6_valgrind</code>. Notice that the program doesn't throw any errors.</p>
</li>
<li>
<p><strong>Run</strong> <code>valgrind</code> on <code>ex6_valgrind</code>. You should see that there are 2 errors.</p>
</li>
<li>
<p><strong>Read</strong> the valgrind output carefully. In <code>ex6_answers.txt</code>, answer the following questions. Please don't change the formatting of the file. For question 1 through 7, we are referring to the first <code>valgrind</code> error (an invalid write error).</p>
<ol>
<li>How many bytes are the invalid write? (The answer should be a number without any units)</li>
<li>Which function caused the invalid write? (The answer should be the name of the function)</li>
<li>Which function called the answer to question 2? (The answer should be the name of a function)</li>
<li>Which file did the call occur in? (The answer should be the name of a file)</li>
<li>Which line did the call occur on? (The answer should be a number)</li>
<li>How many bytes were actually allocated? (The answer should be a number without any units)</li>
<li>How many bytes should have been allocated? Feel free to read the code. (The answer should be a number without any units)</li>
<li>Are there any memory leaks? (The answer should be Yes or No)</li>
<li>How many bytes were leaked? Write 0 if there are no memory leaks. (The answer should be a number without any units)</li>
</ol>
</li>
</ol>
<h2 id="exercise-7-memory-management">Exercise 7: Memory Management</h2>
<p>This exercise uses <code>ex7_vector.h</code>, <code>ex7_test_vector.c</code>, and <code>ex7_vector.c</code>, where we provide you with a framework for implementing a variable-length array. This exercise is designed to help familiarize you with C structs and memory management in C.</p>
<ol>
<li>
<p><strong>Try to explain</strong> why <code>bad_vector_new()</code> is bad. We have provided the reason here, so you can verify your understanding</p>
<details>
<summary>bad_vector_new()</summary>
The vector is created on the stack, instead of the heap. All memory stored on the stack gets freed as soon as that function finishes running, so when the function returns, we lose the vector we constructed.
</details>
</li>
<li>
<p><strong>Fill in</strong> the functions <code>vector_new()</code>, <code>vector_get()</code>, <code>vector_delete()</code>, and <code>vector_set()</code> in <code>ex7_vector.c</code> so that our test code <code>ex7_test_vector.c</code> runs without any memory management errors.</p>
<p>Comments in the code describe how the functions should work. Look at the functions we've filled in to see how the data structures should be used. For consistency, <em>it is assumed that all entries in the vector are 0 unless set by the user. Keep this in mind as <code>malloc()</code> does not zero out the memory it allocates.</em> <code>vector_set</code> should resize the array if the index passed in is larger than the size of the array.</p>
</li>
<li>
<p><strong>Test</strong> your implementation of <code>vector_new()</code>, <code>vector_get()</code>, <code>vector_delete()</code>, and <code>vector_set()</code> for correctness.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">gcc</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>g</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> ex7_vector ex7_vector.c ex7_test_vector.c</span>
</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">./ex7_vector</span></span>
</code></pre>
</li>
<li>
<p><strong>Test</strong> your implementation of <code>vector_new()</code>, <code>vector_get()</code>, <code>vector_delete()</code>, and <code>vector_set()</code> for memory management.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">valgrind</span></span><span class="z-meta z-function-call z-arguments z-shell"> ./ex7_vector</span>
</span></code></pre>
</li>
</ol>
<p>Any number of suppressed errors is fine; they do not affect us.</p>
<p>Feel free to also use CGDB to debug your code.</p>
<h2 id="exercise-8-double-pointers">Exercise 8: Double Pointers</h2>
<p><strong>Edit</strong> <code>ex8_double_pointers.c</code> using your editor of choice and fill in the blanks.</p>
<p><strong>Compile and run</strong> the program and <strong>check</strong> that the output matches what you expect.</p>
<h2 id="exercise-9-putting-it-all-together">Exercise 9: Putting It All Together</h2>
<p>Here's one to help you in your interviews. In <code>ex9_cycle.c</code>, complete the function <code>ll_has_cycle()</code> to implement the following algorithm for checking if a singly-linked list has a cycle.</p>
<ol>
<li>Start with two pointers at the head of the list. One will be called fast_ptr
and the other will be called slow_ptr.</li>
<li>Advance fast_ptr by two nodes. If this is not possible because of a null pointer,
we have found the end of the list, and therefore the list is acyclic.</li>
<li>Advance slow_ptr by one node. (A null pointer check is unnecessary. Why?)</li>
<li>If the fast_ptr and slow_ptr ever point to the same node, the list is cyclic. Otherwise,
go back to step 2.</li>
<li>If the list has a cycle, return 1. Else, return 0.</li>
</ol>
<p>If you want to see the definition of the <code>node</code> struct, open <code>ex9_cycle.h</code> (<a href="https://web.archive.org/web/20240301065845/https://cs61c.org/sp24/labs/lab01/#faq">FAQ: What is a header file?</a>).</p>
<h3 id="action-item">Action Item</h3>
<p>Implement <code>ll_has_cycle()</code>. Once you've done so, you can execute the following commands to run the tests for your code. If you make <strong>any</strong> changes, make sure to run <strong>ALL</strong> of the following commands again, in order.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">gcc</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>g</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> ex9_test_cycle ex9_test_cycle.c ex9_cycle.c</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">./ex9_test_cycle</span></span>
</span></code></pre>
<p>Here's a <a href="https://web.archive.org/web/20240301065845/https://en.wikipedia.org/wiki/Cycle_detection#Floyd.27s_Tortoise_and_Hare">Wikipedia article</a> on the algorithm and why it works. Don't worry about it if you don't completely understand it. We won't test you on this.</p>
<h2 id="exercise-10-reflection-and-feedback-form">Exercise 10: Reflection and Feedback Form</h2>
<p>We are working to improve the class every week - please fill out <a href="https://web.archive.org/web/20240301065845/https://docs.google.com/forms/d/e/1FAIpQLSf0g3Ddxi5JnVG9RjzSaRGpP76jITZJpFXk66o9Rc-BvfAwsA/viewform">this survey</a> to tell us about your experience in discussion and lab so far!</p>
<hr>
<h2 id="submission">Submission</h2>
<p>Save, commit, and push your work, then submit to the <strong>Lab 2</strong> assignment on Gradescope.</p>
<hr>
<h2 id="common-gdb-errors">Common GDB Errors</h2>
<h3 id="gdb-is-skipping-over-lines-of-code">GDB is skipping over lines of code</h3>
<p>This could mean that your source file is more recent than your executable. Exit GDB, recompile your code with the <code>-g</code> flag, and restart gdb.</p>
<h3 id="gdb-isn-t-loading-my-file">GDB isn't loading my file</h3>
<p>You might see an error like this "not in executable format: file format not recognized" or "No symbol table loaded. Use the "file" command."</p>
<p>This means that you called gdb on the source file (the one ending in <code>.c</code>) instead of the executable. Exit GDB and make sure that you call it with the executable.</p>
<h3 id="how-do-i-switch-between-the-code-window-and-the-console">How do I switch between the code window and the console?</h3>
<p>CGDB presents a vim-like navigation interface: Press <kbd>i</kbd> on your keyboard to switch from the code window to the console. Press <kbd>Esc</kbd> to switch from the console to the code window.</p>
<p>GDB presents a readline/emacs-like navigation interface: Press <kbd>Ctrl</kbd> + <kbd>X</kbd> then <kbd>O</kbd> to switch between windows.</p>
<h3 id="i-m-stuck-in-the-code-window">I'm stuck in the code window</h3>
<p>Press <kbd>i</kbd> on your keyboard. This should get you back to the console.</p>
<h3 id="the-text-ui-is-garbled">The text UI is garbled</h3>
<p>Refresh the GDB text UI by pressing <kbd>Ctrl</kbd> + <kbd>l</kbd>.</p>
<hr>
<h2 id="other-useful-gdb-commands-recommended">Other Useful GDB Commands (Recommended)</h2>
<h3 id="command-info-locals">Command: <code>info locals</code></h3>
<p>Prints the value of all of the local variables in the current stack frame</p>
<h3 id="command-command">Command: <code>command</code></h3>
<p>Executes a list of commands every time a break point is reached. For example:</p>
<p>Set a breakpoint:</p>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">b 73
</span></code></pre>
<p>Type <code>commands</code> followed by the breakpoint number:</p>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">commands 1
</span></code></pre>
<p>Type the list of commands that you want to execute separated by a new line. After your list of commands, type <code>end</code> and hit <kbd>Enter</kbd>.</p>
<pre data-lang="txt" class="language-txt z-code"><code class="language-txt" data-lang="txt"><span class="z-text z-plain">p var1
p var2
end
</span></code></pre>
</div>
</div>
</div>
</section>
</main>
<footer>
<div class="container border-top pt-4 mb-5">
<div class="row">
<div class="col">
<div id="dark-toggle-wrapper" class="">
<div class="form-check form-switch">
<input id="inputDarkToggle" class="form-check-input" type="checkbox">
<label class="form-check-label" for="inputDarkToggle">
Dark Mode
<a id="buttonDarkToggleReset" class="d-none" href="javascript:void(0);">(reset)</a>
</label>
</div>
</div>
</div>
</div>
</div>
</footer>
<script>
  

  
    document.addEventListener("DOMContentLoaded", function() {
      initToC();
    });
  
</script>



<deepl-input-controller><template shadowrootmode="open"><link rel="stylesheet" href="chrome-extension://cofdbpoegempjloogbagkncekinflcnj/build/content.css"><div dir="ltr"><div class="dl-input-translation-container svelte-95aucy"><div></div></div></div></template></deepl-input-controller></body><div class="xl-chrome-ext-footer" id="xl-chrome-ext-footer">
                <div class="xl-chrome-ext-footer__ball animate__bounceOutUp">
                  <div class="xl-chrome-ext-footer__logo"></div>
                  <div class="xl-chrome-ext-footer__quantity">2</div>
                </div>
                <div class="xl-chrome-ext-footer__bar xl-chrome-ext-footer__bar--hidden">
                  <div class="xl-chrome-ext-footer__content">
                    <p class="xl-chrome-ext-footer__text">检测到页面存在2个资源</p>
                    <div class="xl-chrome-ext-footer__action">
                      <div class="xl-chrome-ext-footer__url download">
                        <div class="xl-chrome-ext-footer__action-name">下载</div>
                      <div class="xl-chrome-ext-footer__popover xl-chrome-ext-footer__popover--hidden" style="top: -270px;">
                  <h3>用迅雷享高速下载</h3>
                  
                  <div class="xl-chrome-ext-footer__explain">当前页面含资源如下：</div>
                  <ul class="xl-chrome-ext-footer__list">
                  <li class="xl-chrome-ext-footer__item">
                  <div class="xl-chrome-ext-footer__type xl-link"></div>
                  <div class="xl-chrome-ext-footer__name">reference-card.pdf</div>
                  <button type="download" data="{&quot;fileName&quot;:&quot;reference-card.pdf&quot;,&quot;isInIframe&quot;:false,&quot;isVideoURL&quot;:false,&quot;protocol&quot;:&quot;https:&quot;,&quot;suffix&quot;:&quot;.pdf&quot;,&quot;url&quot;:&quot;https://cs61c.org/sp24/pdfs/resources/reference-card.pdf&quot;}">下载</button>
                </li>
                  
                  <li class="xl-chrome-ext-footer__item">
                  <div class="xl-chrome-ext-footer__type xl-link"></div>
                  <div class="xl-chrome-ext-footer__name">gdb5-refcard.pdf</div>
                  <button type="download" data="{&quot;fileName&quot;:&quot;gdb5-refcard.pdf&quot;,&quot;isInIframe&quot;:false,&quot;isVideoURL&quot;:false,&quot;protocol&quot;:&quot;https:&quot;,&quot;suffix&quot;:&quot;.pdf&quot;,&quot;url&quot;:&quot;https://inst.eecs.berkeley.edu/%7Ecs61c/resources/gdb5-refcard.pdf&quot;}">下载</button>
                </li>
                  </ul>
                </div></div>
                      <div class="xl-chrome-ext-footer__url cloudAdd" style="display: none;">
                        <div class="xl-chrome-ext-footer__action-name">
                          <div class="xl-chrome-ext-footer__button-icon save"></div>
                          <span class="xl-chrome-ext-footer__button-text">
                            存云盘
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="xl-chrome-ext-footer__agreement" style="display: flex;">
                      <span>启用插件访问在线视频时，插件将在播放窗口展示对播放链接的快捷功能</span>
                      <span class="xl-chrome-ext-footer__know">我知道了</span>
                    </div>
                    <div class="xl-chrome-ext-footer__close-wrapper">
                      <div class="xl-chrome-ext-tips">
                        <div class="xl-chrome-ext-footer__close"></div>
                        <div class="xl-chrome-ext-title xl-chrome-ext-title--footer">本次关闭</div>
                      </div>
                    </div>
                  </div>
                </div>
                </div></html>